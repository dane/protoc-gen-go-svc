syntax = "proto3";

package gen.svc;

import "google/protobuf/descriptor.proto";

option go_package = "github.com/dane/proto-gen-go-svc/gen/svc;svc";

extend google.protobuf.FileOptions {
  string go_package = 1115;
}

extend google.protobuf.MethodOptions {
  MethodAnnotation method = 1115;
}

extend google.protobuf.MessageOptions {
  MessageAnnotation message = 1115;
}

extend google.protobuf.FieldOptions {
  FieldAnnotation field = 1115;
};

extend google.protobuf.EnumOptions {
  EnumAnnotation enum = 1115;
}

extend google.protobuf.EnumValueOptions {
  EnumValueAnnotation enum_value = 1115;
}

message MethodAnnotation {
  Delegate delegate = 1;
  bool deprecated = 2;
}

message MessageAnnotation {
  Delegate delegate = 1;
}

message FieldAnnotation {
  Delegate delegate = 1;
  Validate validate = 2;
  Default  default = 3;
  bool deprecated = 4;
}

message EnumAnnotation {
  Delegate delegate = 1;
}

message EnumValueAnnotation {
  Delegate delegate = 1;
  Receive receive = 2;
}

message Delegate {
  string name = 1;
}

message Receive {
  string name = 1;
  repeated string names = 2;
}

message Validate {
  bool required = 1;
  int64 min = 2;
  int64 max = 3;
  repeated string in = 4;
  IsType is = 5;

  enum IsType {
    UNSPECIFIED = 0;
    UUID = 1;
    EMAIL = 2;
    URL = 3;
  }
}

message Default {
  bool bool = 1;
  int64 int64 = 2;
  uint64 uint64 = 3;
  float float = 4;
  string string = 5;
}
